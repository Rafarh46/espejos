<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="Tienda en línea con carrito y pagos integrados para productos de seguridad vial.">
    <meta name="keywords" content="tienda en línea, carrito, pagos en línea, stripe, seguridad vial">
    <meta name="author" content="Ingeniera Industrial Espejos MX">
    <!-- Page Title -->
    <title>Tienda en Línea | Ingeniera Industrial Espejos MX</title>
    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png">
    <!-- Google Fonts Css-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <!-- Bootstrap Css -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <!-- SlickNav Css -->
    <link href="css/slicknav.min.css" rel="stylesheet">
    <!-- Swiper Css -->
    <link rel="stylesheet" href="css/swiper-bundle.min.css">
    <!-- Font Awesome Icon Css-->
    <link href="css/all.css" rel="stylesheet" media="screen">
    <!-- Animated Css -->
    <link href="css/animate.css" rel="stylesheet">
    <!-- Magnific Popup Core Css File -->
    <link rel="stylesheet" href="css/magnific-popup.css">
    <!-- Mouse Cursor Css File -->
    <link rel="stylesheet" href="css/mousecursor.css">
    <!-- Main Custom Css -->
    <link href="css/custom.css" rel="stylesheet" media="screen">
</head>

<body>

    <!-- Preloader Start -->
    <div class="preloader">
        <div class="loading-container">
            <div class="loading"></div>
            <div id="loading-icon"><img src="images/LogoIng.svg" alt=""></div>
        </div>
    </div>
    <!-- Preloader End -->

    <!-- Topbar Section Start -->
    <div class="topbar">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-3">
                    <div class="site-logo">
                        <a href="./index.html">
                            <img src="images/LogoIng.svg" alt="Logo">
                        </a>
                    </div>
                    <!-- Logo End -->
                </div>

                <div class="col-lg-9 col-md-12">
                    <!-- Topbar Contact Information Start -->
                    <div class="topbar-contact-info">
                        <ul>
                            <li>
                                <a href="contact.html">
                                    <div class="icon-box">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="31"
                                            viewBox="0 0 30 31" fill="none">
                                            <path
                                                d="M19.7836 29.753C19.659 29.753 19.5335 29.7421 19.4089 29.7197C15.1192 28.9475 10.843 26.6092 7.36841 23.1346C3.89385 19.66 1.55548 15.3838 0.783285 11.0941C0.6378 10.2845 0.97707 9.44247 1.64766 8.94888C2.50643 8.31688 3.43177 7.72934 4.39745 7.20365C5.0377 6.85525 5.79252 6.83581 6.41805 7.15093C8.55645 8.22882 9.9739 10.0241 10.6309 12.4868C10.8091 13.1532 10.6504 13.8759 10.2066 14.4196L8.78969 16.1534C8.56263 16.4314 8.53495 16.8148 8.72107 17.1076C9.92648 19.0042 11.4988 20.5765 13.3955 21.7816C13.6879 21.9681 14.0713 21.9401 14.3497 21.7133L16.0831 20.2967C16.6271 19.8526 17.3489 19.6942 18.0165 19.8721C20.4789 20.5294 22.2742 21.9469 23.3521 24.0853C23.6675 24.7102 23.6481 25.4653 23.2997 26.1056C22.7737 27.0712 22.1861 27.9966 21.5538 28.8554C21.1365 29.4226 20.4695 29.753 19.7836 29.753ZM5.46974 8.28448C5.32808 8.28448 5.18201 8.32159 5.04654 8.39551C4.13446 8.89204 3.26184 9.44601 2.45224 10.0418C2.19514 10.2312 2.06438 10.5498 2.11916 10.8537C2.84246 14.8737 5.04742 18.8943 8.32791 22.1751C11.6087 25.4556 15.6293 27.6605 19.6493 28.3838C19.9538 28.4383 20.2718 28.3076 20.4609 28.0508C21.057 27.2412 21.611 26.3686 22.1078 25.4565C22.243 25.2079 22.2553 24.9237 22.1405 24.6964C21.2313 22.8931 19.768 21.7439 17.6664 21.1832C17.4202 21.1178 17.1486 21.1788 16.9416 21.3478L15.2084 22.7641C14.476 23.3625 13.4544 23.4279 12.6674 22.927C10.6018 21.6144 8.88865 19.9012 7.57574 17.8356C7.07509 17.0481 7.14047 16.0267 7.7389 15.2946L9.15547 13.5611C9.32422 13.3544 9.38577 13.0837 9.3198 12.8369C8.75907 10.7351 7.60991 9.27166 5.80695 8.36252C5.70328 8.3104 5.58813 8.28448 5.46974 8.28448Z"
                                                fill="currentColor" />
                                            <path
                                                d="M28.5603 16.2157C28.5506 16.2157 28.5409 16.2154 28.5314 16.2151C28.1568 16.1995 27.8662 15.8832 27.8818 15.5089C28.0267 12.0511 26.7111 8.66933 24.2726 6.23024C21.8338 3.79174 18.4591 2.46941 14.9939 2.62108C14.6335 2.63051 14.3033 2.34631 14.2877 1.9714C14.2721 1.59709 14.5628 1.28079 14.9371 1.26518C18.7736 1.10261 22.5253 2.56424 25.2321 5.27074C27.9386 7.97724 29.3985 11.7298 29.2377 15.5657C29.2223 15.9303 28.922 16.2157 28.5603 16.2157Z"
                                                fill="currentColor" />
                                            <path
                                                d="M24.95 16.2158C24.9367 16.2158 24.9232 16.2155 24.9096 16.2147C24.5353 16.1926 24.2499 15.8716 24.272 15.4975C24.4193 12.9957 23.4904 10.5472 21.7231 8.77989C19.9558 7.01257 17.5058 6.08606 15.0054 6.23095C14.6293 6.25599 14.3104 5.96767 14.2883 5.59335C14.2662 5.21933 14.5516 4.89832 14.9259 4.87623C17.8109 4.70453 20.6417 5.77918 22.6826 7.8204C24.7238 9.86161 25.797 12.6889 25.6267 15.5771C25.6055 15.9378 25.3066 16.2158 24.95 16.2158Z"
                                                fill="currentColor" />
                                            <path
                                                d="M21.3438 16.2159C21.3226 16.2159 21.3014 16.2151 21.2799 16.213C20.9067 16.1782 20.6325 15.8475 20.6673 15.4744C20.811 13.9335 20.2668 12.4227 19.1736 11.3295C18.0804 10.2366 16.5707 9.69177 15.0287 9.83578C14.6559 9.86965 14.3245 9.59635 14.2901 9.22321C14.2553 8.85008 14.5295 8.51935 14.9026 8.4846C16.8487 8.30348 18.7536 8.99056 20.1331 10.37C21.5128 11.7495 22.1999 13.6561 22.0185 15.6004C21.9858 15.9521 21.6901 16.2159 21.3438 16.2159Z"
                                                fill="currentColor" />
                                        </svg>
                                    </div>
                                    <p class="icon-text-phone">Llámanos.</p>
                                    <p class="icon-text-phone">55 1106 4233</p>
                                </a>
                            </li>
                        </ul>
                        <!-- Topbar Qoute Button Start -->
                        <div class="header-social-box d-inline-flex">
                            <!-- Header Social Links Start -->
                            <div class="header-social-links">
                                <ul>
                                    <li><a href="#"><i class="fa-brands fa-x-twitter"></i></a></li>
                                    <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                                    <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                                </ul>
                            </div>
                            <!-- Header Social Links End -->
                        </div>

                        <!-- Topbar Qoute Button End -->
                    </div>
                    <!-- Topbar Contact Information End -->
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar Section End -->

    <!-- Header Start -->
    <header class="main-header">
        <div class="header-sticky">
            <nav class="navbar navbar-expand-lg">
                <div class="container">
                    <!-- Logo Start -->
                    <a class="navbar-brand" href="./">
                        <img src="images/LogoIngOscuro.svg" alt="Logo">
                    </a>
                    <!-- Logo End -->

                    <!-- Main Menu Start -->
                    <div class="collapse navbar-collapse main-menu">
                        <div class="nav-menu-wrapper">
                            <ul class="navbar-nav mr-auto" id="menu">
                                <li class="nav-item"> <a class="nav-link" href="./index.html">Inicio</a>
                                </li>
                                <li class="nav-item submenu"><a class="nav-link" href="#">Catalogo</a>
                                    <ul class="product-menu">
                                        <li class="nav-item"><a class="nav-link"
                                                href="espejo-convexo-vidrio.html">Espejos
                                                Convexos vidrio</a></li>
                                        <li class="nav-item"><a class="nav-link"
                                                href="espejo-convexo-policarbonato.html">Espejos
                                                Convexos
                                                Policarbonato</a></li>
                                        <li class="nav-item"><a class="nav-link"
                                                href="espejo-convexo-acrilico.html">Espejos
                                                Convexos Acrilico </a></li>
                                        <li class="nav-item"><a class="nav-link" href="espejo-medio-domo.html">Espejos
                                                Medio
                                                Domo
                                            </a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link"
                                                href="espejo-domo-completo.html">Espejos Domo
                                                Completo</a></li>
                                        <li class="nav-item"><a class="nav-link" href="trafitambos.html">Trafitambos
                                                Viales
                                                Naranja</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" href="barrera-naranja.html">Bastón de Inspección Vehicular</a></li>
                                        <li class="nav-item"><a class="nav-link" href="conos-viales.html">Espejo Convexo Domo Completo para Tráfico de Montacargas</a></li>
                                        <li class="nav-item"><a class="nav-link" href="costales-rafia.html">Costales
                                                Sacos de
                                                Rafia</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item"><a class="nav-link" href="ecommerce.html">Tienda</a></li>
                                <li class="nav-item"><a class="nav-link active" href="tienda-online.html">Tienda en línea</a></li>
                                <li class="nav-item"><a class="nav-link" href="contact.html">Contacto</a></li>
                            </ul>
                        </div>

                        <!-- Header Social Box Start -->
                        <ul class="search-bar" id="menu">
                            <li class="nav-item submenu">
                                <div class="search-bar-outline">
                                    <label for="search-toggle" class="search-bar-label">Buscar
                                        Producto</label>
                                    <input type="text" id="search-toggle" class="search-bar-input">
                                </div>
                                <ul class="product-menu">
                                    <li class="nav-item"><a class="nav-link" href="espejo-convexo-vidrio.html">Espejos
                                            Convexos vidrio</a></li>
                                    <li class="nav-item"><a class="nav-link" href="espejo-convexo-policarbonato.html">Espejos
                                            Convexos
                                            Policarbonato</a></li>
                                    <li class="nav-item"><a class="nav-link" href="espejo-convexo-acrilico.html">Espejos
                                            Convexos Acrilico </a></li>
                                    <li class="nav-item"><a class="nav-link" href="espejo-medio-domo.html">Espejos
                                            Medio
                                            Domo
                                        </a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" href="espejo-domo-completo.html">Espejos
                                            Domo
                                            Completo</a></li>
                                    <li class="nav-item"><a class="nav-link" href="trafitambos.html">Trafitambos
                                            Viales
                                            Naranja</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" href="barrera-naranja.html">Bastón de Inspección Vehicular</a></li>
                                    <li class="nav-item"><a class="nav-link" href="conos-viales.html">Espejo Convexo Domo Completo para Tráfico de Montacargas</a></li>
                                    <li class="nav-item"><a class="nav-link" href="costales-rafia.html">Costales
                                            Sacos de
                                            Rafia</a></li>
                                </ul>
                            </li>
                        </ul>
                        <!-- Header Social Box End -->
                    </div>
                    <!-- Main Menu End -->
                    <div class="navbar-toggle"></div>
                </div>
            </nav>
            <div class="responsive-menu"></div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Page Header Start -->
    <div class="page-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="page-header-box">
                        <h1 class="text-anime-style-3" data-cursor="-opaque">Tienda en línea</h1>
                        <nav class="wow fadeInUp">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="./">Inicio</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Tienda en línea</li>
                            </ol>
                        </nav>
                        <p class="text-anime-style-3 mt-3" data-cursor="-opaque">Compra productos destacados, administra tu carrito y paga en línea con Stripe.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Page Header End -->

    <!-- Products & Cart Start -->
    <section class="our-services page-service">
        <div class="container">
            <div class="row align-items-center mb-4">
                <div class="col-lg-7">
                    <div class="section-title">
                        <h2 class="text-anime-style-3" data-cursor="-opaque">Selección destacada para compra inmediata</h2>
                        <p class="wow fadeInUp" data-wow-delay="0.2s">Agrega artículos al carrito, ajusta cantidades y completa tu pago en línea con Stripe.</p>
                    </div>
                </div>
                <div class="col-lg-5 text-lg-end">
                    <div class="btn-default btn-default-light" id="cart-status">Carrito: <span id="cart-count">0</span> artículos</div>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-lg-8">
                    <div class="row g-4" id="product-grid">
                        <div class="col-md-6">
                            <div class="service-item wow fadeInUp" data-wow-delay="0.2s">
                                <div class="service-content">
                                    <h3>Espejo convexo 60 cm</h3>
                                    <p>Visibilidad amplia para almacenes y cruces viales internos.</p>
                                    <div class="d-flex align-items-center justify-content-between">
                                        <strong>$1,890 MXN</strong>
                                        <button class="btn-default" data-product="Espejo convexo 60 cm" data-price="1890">Agregar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-item wow fadeInUp" data-wow-delay="0.3s">
                                <div class="service-content">
                                    <h3>Espejo domo 90 cm</h3>
                                    <p>Monitoreo 360° para tiendas y centros logísticos.</p>
                                    <div class="d-flex align-items-center justify-content-between">
                                        <strong>$3,450 MXN</strong>
                                        <button class="btn-default" data-product="Espejo domo 90 cm" data-price="3450">Agregar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-item wow fadeInUp" data-wow-delay="0.4s">
                                <div class="service-content">
                                    <h3>Cono vial reflejante</h3>
                                    <p>Alta visibilidad para operaciones nocturnas o de emergencia.</p>
                                    <div class="d-flex align-items-center justify-content-between">
                                        <strong>$320 MXN</strong>
                                        <button class="btn-default" data-product="Cono vial reflejante" data-price="320">Agregar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-item wow fadeInUp" data-wow-delay="0.5s">
                                <div class="service-content">
                                    <h3>Kit de señalización completo</h3>
                                    <p>Paquete listo para obras con conos, barreras y reflectantes.</p>
                                    <div class="d-flex align-items-center justify-content-between">
                                        <strong>$5,990 MXN</strong>
                                        <button class="btn-default" data-product="Kit de señalización completo" data-price="5990">Agregar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="service-item wow fadeInUp" data-wow-delay="0.2s">
                        <div class="service-content">
                            <h3>Carrito en línea</h3>
                            <p class="mb-3">Revisa los productos seleccionados antes de pagar.</p>
                            <div id="cart-items" class="mb-3">
                                <p class="text-muted">Aún no hay productos en el carrito.</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <strong>Total</strong>
                                <strong id="cart-total">$0 MXN</strong>
                            </div>
                            <button class="btn-default w-100 mb-2" id="checkout-button">Pagar con Stripe</button>
                            <p class="small text-muted">El pago seguro se procesa mediante Stripe. Se requiere un backend para crear la sesión de pago.</p>
                            <div id="checkout-feedback" class="small text-danger"></div>
                        </div>
                    </div>

                    <div class="service-item wow fadeInUp" data-wow-delay="0.3s">
                        <div class="service-content">
                            <h3>Pago en línea</h3>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i>Integración con Stripe Checkout</li>
                                <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i>Pagos con tarjeta y wallets digitales</li>
                                <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i>Recibos automáticos por correo</li>
                            </ul>
                            <a class="btn-default btn-default-light w-100" href="https://stripe.com/mx" target="_blank" rel="noopener">Conoce Stripe</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Products & Cart End -->

    <!-- Payment Steps Start -->
    <section class="our-service-steps">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="section-title">
                        <h2 class="text-anime-style-3" data-cursor="-opaque">Cómo funciona la compra en línea</h2>
                        <p class="wow fadeInUp" data-wow-delay="0.2s">La experiencia de pago es ágil y segura, ideal para pedidos urgentes.</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="service-steps-content">
                        <div class="service-step wow fadeInUp" data-wow-delay="0.2s">
                            <h3>1. Selecciona productos</h3>
                            <p>Agrega artículos al carrito y ajusta cantidades fácilmente.</p>
                        </div>
                        <div class="service-step wow fadeInUp" data-wow-delay="0.3s">
                            <h3>2. Confirma tu pedido</h3>
                            <p>Verifica el total antes de continuar con el pago seguro.</p>
                        </div>
                        <div class="service-step wow fadeInUp" data-wow-delay="0.4s">
                            <h3>3. Paga con Stripe</h3>
                            <p>Conecta con Stripe Checkout para finalizar en minutos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Payment Steps End -->

    <!-- Footer Start -->
    <footer class="main-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="footer-logo">
                        <img src="images/LogoIng.svg" alt="Logo">
                    </div>
                    <p>Ingeniera Industrial Espejos MX, especialistas en seguridad vial y señalización.</p>
                </div>
                <div class="col-lg-4">
                    <h3>Contacto</h3>
                    <ul class="footer-contact">
                        <li><i class="fa-solid fa-phone"></i> 55 1106 4233</li>
                        <li><i class="fa-solid fa-envelope"></i> ventas@espejos.mx</li>
                        <li><i class="fa-solid fa-location-dot"></i> Ciudad de México</li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h3>Enlaces rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="ecommerce.html">Tienda actual</a></li>
                        <li><a href="tienda-online.html">Tienda en línea</a></li>
                        <li><a href="contact.html">Contacto</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer End -->

    <!-- Jquery Library File -->
    <script src="js/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap js file -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Validator js file -->
    <script src="js/validator.min.js"></script>
    <!-- SlickNav js file -->
    <script src="js/jquery.slicknav.js"></script>
    <!-- Swiper js file -->
    <script src="js/swiper-bundle.min.js"></script>
    <!-- Counter js file -->
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <!-- Isotop js file -->
    <script src="js/isotope.min.js"></script>
    <!-- Magnific Popup js file -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <!-- SmoothScroll -->
    <script src="js/SmoothScroll.js"></script>
    <!-- Parallax js -->
    <script src="js/parallaxie.js"></script>
    <!-- MagicCursor js file -->
    <script src="js/gsap.min.js"></script>
    <script src="js/magiccursor.js"></script>
    <!-- Wow js file -->
    <script src="js/wow.js"></script>
    <!-- Main Custom js file -->
    <script src="js/function.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const cartKey = 'espejos_cart';
        const cartItemsEl = document.getElementById('cart-items');
        const cartTotalEl = document.getElementById('cart-total');
        const cartCountEl = document.getElementById('cart-count');
        const checkoutButton = document.getElementById('checkout-button');
        const checkoutFeedback = document.getElementById('checkout-feedback');

        const formatCurrency = (value) => `$${value.toLocaleString('es-MX')} MXN`;

        const getCart = () => JSON.parse(localStorage.getItem(cartKey)) || [];

        const saveCart = (cart) => localStorage.setItem(cartKey, JSON.stringify(cart));

        const updateCartUI = () => {
            const cart = getCart();
            cartItemsEl.innerHTML = '';
            let total = 0;
            let count = 0;

            if (cart.length === 0) {
                cartItemsEl.innerHTML = '<p class="text-muted">Aún no hay productos en el carrito.</p>';
            } else {
                cart.forEach((item, index) => {
                    total += item.price * item.quantity;
                    count += item.quantity;
                    const itemRow = document.createElement('div');
                    itemRow.className = 'd-flex align-items-center justify-content-between mb-2';
                    itemRow.innerHTML = `
                        <div>
                            <strong>${item.name}</strong><br>
                            <small>${formatCurrency(item.price)} x ${item.quantity}</small>
                        </div>
                        <div class="d-flex align-items-center gap-2">
                            <button class="btn btn-sm btn-light" data-action="decrease" data-index="${index}">-</button>
                            <button class="btn btn-sm btn-light" data-action="increase" data-index="${index}">+</button>
                            <button class="btn btn-sm btn-outline-danger" data-action="remove" data-index="${index}"><i class="fa-solid fa-xmark"></i></button>
                        </div>
                    `;
                    cartItemsEl.appendChild(itemRow);
                });
            }

            cartTotalEl.textContent = formatCurrency(total);
            cartCountEl.textContent = count;
        };

        const addToCart = (name, price) => {
            const cart = getCart();
            const existing = cart.find((item) => item.name === name);
            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ name, price, quantity: 1 });
            }
            saveCart(cart);
            updateCartUI();
        };

        document.querySelectorAll('[data-product]').forEach((button) => {
            button.addEventListener('click', () => {
                const name = button.dataset.product;
                const price = parseFloat(button.dataset.price);
                addToCart(name, price);
            });
        });

        cartItemsEl.addEventListener('click', (event) => {
            const action = event.target.closest('button')?.dataset.action;
            const index = parseInt(event.target.closest('button')?.dataset.index, 10);
            if (Number.isNaN(index)) return;

            const cart = getCart();
            if (!cart[index]) return;

            if (action === 'increase') {
                cart[index].quantity += 1;
            }
            if (action === 'decrease') {
                cart[index].quantity = Math.max(1, cart[index].quantity - 1);
            }
            if (action === 'remove') {
                cart.splice(index, 1);
            }

            saveCart(cart);
            updateCartUI();
        });

        checkoutButton.addEventListener('click', async () => {
            checkoutFeedback.textContent = '';
            const cart = getCart();
            if (cart.length === 0) {
                checkoutFeedback.textContent = 'Agrega productos al carrito antes de pagar.';
                return;
            }

            try {
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ items: cart })
                });

                if (!response.ok) {
                    throw new Error('No se pudo crear la sesión de pago.');
                }

                const data = await response.json();
                const stripe = Stripe(data.publishableKey || 'pk_test_REEMPLAZA_ESTE_VALOR');
                await stripe.redirectToCheckout({ sessionId: data.sessionId });
            } catch (error) {
                checkoutFeedback.textContent = 'Configura tu backend Stripe para habilitar el pago en línea.';
            }
        });

        updateCartUI();
    </script>
</body>

</html>
